(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{39:function(e,t,r){e.exports=r(71)},48:function(e,t,r){},49:function(e,t,r){},71:function(e,t,r){"use strict";r.r(t);var a=r(1),n=r.n(a),c=r(36),o=r.n(c),s=r(11),i=r(12),u=r(15),l=r(13),h=r(16),p=function(e){return n.a.createElement("button",{className:"",onClick:function(){e.onClick()}},e.buttonName)},d=r(14),C={CHARACTERS_FETCH_START:"CHARACTERS_FETCH_START",CHARACTERS_FETCH_SUCCESS:"CHARACTER_FETCH_SUCCESS",CHARACTERS_FETCH_FAILURE:"CHARACTERS_FETCH_FAILURE",FETCH_CHARACTER_START:"FETCH_CHARACTER_START",FETCH_CHARACTER_SUCCESS:"FETCH_CHARACTER_SUCCESS",FETCH_CHARACTER_FAILURE:"FETCH_CHARACTER_FAILURE",SELECT_CHARACTER:"SELECT_CHARACTER"},E={BOOKS_FETCH_START:"BOOKS_FETCH_START",BOOKS_FETCH_SUCCESS:"BOOKS_FETCH_SUCCESS",BOOKS_FETCH_FAILURE:"BOOKS_FETCH_FAILURE"},f={HOUSES_FETCH_START:"HOUSES_FETCH_START",HOUSES_FETCH_SUCCESS:"HOUSES_FETCH_SUCCESS",HOUSES_FETCH_FAILURE:"HOUSES_FETCH_FAILURE",SELECT_HOUSE:"SELECT_HOUSE",FETCH_HOUSE_START:"FETCH_HOUSE",FETCH_HOUSE_SUCCESS:"FETCH_HOUSE_SUCCESS",FETCH_HOUSE_FAILURE:"FETCH_HOUSE_FAILURE"},S=r(19);function T(e){return null==e||0===e.length}function H(e){return Object.keys(e).filter(function(e){return"id"!==e}).map(function(t){return t+"="+e[t]}).join("&")}function O(e){return void 0===e||null===e||""===e}function b(e){var t=e.split("/");return+t[t.length-1]}function m(e,t,r){return!!t[r.id]&&t[r.id].toLowerCase().includes(e.value.toLowerCase())}function v(e,t,r){return t=null===t||void 0===t?-1/0:t,"string"===typeof(e=null===e||void 0===e?-1/0:e)&&((e=e.toLowerCase()).startsWith("the ")?e=e.slice(4):e.startsWith("a ")&&(e=e.slice(2))),"string"===typeof t&&((t=t.toLowerCase()).startsWith("the ")?t=t.slice(4):t.startsWith("a ")&&(t=t.slice(2))),e>t?1:e<t?-1:0}var _=function(e){function t(){var e,r;Object(s.a)(this,t);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(r=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(n)))).state={pageSize:10,filterUnknownCulture:!1},r.getMoreCharacters=function(){r.props.fetchCharacters({page:+r.props.lastPageRequested+1})},r.characterValidator=function(e){return e.name=O(e.name)?e.aliases[0]+"*":e.name,e},r.updateCultureFilter=function(){r.setState({filterUnknownCulture:!r.state.filterUnknownCulture})},r.changePageSize=function(e){r.setState({pageSize:e})},r.filterCharacterByCulture=function(e){return!r.state.filterUnknownCulture||!O(e.culture)},r.tdProps=function(e,t,a){return{onClick:function(e,n){if("characterName"===a.id){var c=b(t.original.url);r.props.selectCharacter({id:c})}n&&n()}}},r.componentDidMount=function(){r.props.lastPageRequested<1&&r.props.fetchCharacters({page:1})},r.componentDidUpdate=function(){},r}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t="domain-container "+(this.props.isDrillDownOpen?"drill-down-open":"drill-down-closed"),r=Object.values(this.props.characters).filter(function(t){return e.filterCharacterByCulture(t)}),a=[{Header:"Name",accessor:"name",id:"characterName",Footer:"*alias",filterable:!0,filterMethod:m},{Header:"Gender",accessor:"gender",filterable:!0,filterMethod:function(e,t){return t.gender.toLowerCase().startsWith(e.value.toLowerCase())}},{Header:"Culture",accessor:"culture",id:"culture",Cell:function(e){return n.a.createElement("span",null,O(e.value)?"unknown":e.value)},filterable:!0,filterMethod:m,Footer:n.a.createElement("span",null,"Filter Unknown: ",n.a.createElement("input",{type:"checkbox",onChange:this.updateCultureFilter,checked:this.state.filterUnknownCulture}))}];return n.a.createElement("div",{className:t},n.a.createElement("span",{className:"table-span"},n.a.createElement(S.a,{data:r,columns:a,resolveData:function(t){return t.map(function(t){return e.characterValidator(t)})},pageSize:this.state.pageSize,onPageSizeChange:this.changePageSize,showFilters:!0,loading:this.props.fetchingCharacters,getTdProps:this.tdProps})),n.a.createElement("div",{className:"api-button"},n.a.createElement(p,{onClick:this.getMoreCharacters,buttonName:"Get More Characters"})))}}]),t}(a.Component),g=Object(d.b)(function(e){return{characters:e.characters.list,lastPageRequested:e.characters.lastPageRequested,fetchingCharacters:e.characters.fetching}},function(e){return{fetchCharacters:function(t){return e({type:C.CHARACTERS_FETCH_START,payload:t})},selectCharacter:function(t){return e({type:C.SELECT_CHARACTER,payload:t})}}})(_),A=(r(30),function(e){function t(){var e,r;Object(s.a)(this,t);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(r=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(n)))).state={bookFilter:"",pageSize:15},r.updateFilter=function(e){r.setState({bookFilter:e.target.value})},r.changePageSize=function(e){r.setState({pageSize:e})},r.reformatBookTitle=function(e){return e.startsWith("The")?e.slice(4).concat(", The"):e.startsWith("A")?e.slice(2).concat(", A"):e},r.convertApiDateToFriendlyDate=function(e){return new Date(e).toLocaleDateString()},r}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t="domain-container "+(this.props.isDrillDownOpen?"drill-down-open":"drill-down-closed"),r=[{Header:"Title",accessor:"name",showFilter:!0,id:"bookTitle",Cell:function(t){return n.a.createElement("span",{className:"book-title"},e.reformatBookTitle(t.value))},filterMethod:m,sorthMethod:v},{Header:"Number of Pages",accessor:"numberOfPages",id:"numberOfPages",filterable:!1},{Header:"Release Date",accessor:"released",Cell:function(t){return n.a.createElement("span",{className:"book release-date"},e.convertApiDateToFriendlyDate(t.value))},filterable:!0}];return n.a.createElement("div",{className:t},n.a.createElement("span",{className:"table-span"},n.a.createElement(S.a,{data:Object.values(this.props.books),columns:r,loading:this.props.fetchingBooks,showFilters:!0,filterable:!0,pageSize:this.state.pageSize,onPageSizeChange:this.changePageSize,pageSizeOptions:[5,10,15]})))}},{key:"componentDidMount",value:function(){this.setState({bookFilter:""})}}]),t}(a.Component)),R=Object(d.b)(function(e){return{books:e.books.list,fetchingBooks:e.books.fetching}},function(e){return{fetchBooks:function(){return e({type:E.BOOKS_FETCH_START})}}})(A),F=(r(48),function(e){function t(){var e,r;Object(s.a)(this,t);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(r=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(n)))).state={houseFilter:"",pageSize:20},r.getMoreHouses=function(){r.props.fetchHouses({page:+r.props.lastPageRequested+1})},r.updateFilter=function(e){r.setState({houseFilter:e.target.value})},r.changePageSize=function(e){r.setState({pageSize:e})},r.reformatHouseTitle=function(e){return e.startsWith("The")?e.slice(4).concat(", The"):e.startsWith("A")?e.slice(2).concat(", A"):e},r.convertApiDateToFriendlyDate=function(e){return new Date(e).toLocaleDateString()},r.resolveHouseData=function(e){var t=b(e.currentLord);return r.props.characters[t]&&(e.lordName=r.props.characters[t].name),e},r.tdProps=function(e,t,a){return{onClick:function(e,n){if("name"===a.id){var c=b(t.original.url);r.props.selectHouse({id:c})}else if("lordName"===a.id&&t.row.lordName){var o=b(t.row.currentLord);r.props.selectCharacter({id:o})}n&&n()}}},r.componentDidMount=function(){r.props.lastPageRequested<1&&r.props.fetchHouses({page:1})},r.componentDidUpdate=function(){Object.values(r.props.houses).filter(function(e){return e.currentLord&&!e.lordName}).forEach(function(e){return r.props.fetchCharacter({id:b(e.currentLord)})})},r}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t="domain-container "+(this.props.isDrillDownOpen?"drill-down-open":"drill-down-closed"),r=[{Header:"Name",accessor:"name",filterMethod:m},{Header:"Region",accessor:"region",filterMethod:m,sortMethod:v,Cell:function(e){return n.a.createElement("span",null,e.value?e.value:"Region unknown")}},{Header:"Current Lord Id",accessor:"currentLord",filterable:!1,show:!1},{Header:"Current Lord",accessor:"lordName",filterable:!0,Cell:function(e){return n.a.createElement("span",null,e.value?e.value:"Name unknown")},filterMethod:m}];return n.a.createElement("div",{className:t},n.a.createElement("span",{className:"table-span"},n.a.createElement(S.a,{data:Object.values(this.props.houses),resolveData:function(t){return t.map(e.resolveHouseData)},columns:r,loading:this.props.fetchingHouses,showFilters:!0,filterable:!0,pageSize:this.state.pageSize,onPageSizeChange:this.changePageSize,getTdProps:this.tdProps})),n.a.createElement("div",{className:"api-button"},n.a.createElement(p,{onClick:this.getMoreHouses,buttonName:"Get More Houses"})))}}]),t}(a.Component)),w=Object(d.b)(function(e){return{houses:e.houses.list,lastPageRequested:e.houses.lastPageRequested,fetchingHouses:e.houses.fetching,characters:e.characters.list}},function(e){return{fetchHouses:function(t){return e({type:f.HOUSES_FETCH_START,payload:t})},fetchCharacter:function(t){return e({type:C.FETCH_CHARACTER_START,payload:t})},selectHouse:function(t){return e({type:f.SELECT_HOUSE,payload:t})},selectCharacter:function(t){return e({type:C.SELECT_CHARACTER,payload:t})}}})(F),j=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"drill-down"},"Character")}}]),t}(a.Component),U=function(e){function t(){var e,r;Object(s.a)(this,t);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(r=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(n)))).checkForAndFetchOverlord=function(){var e=b(r.props.house.overlord);e&&!r.props.houses[e]&&r.props.fetchHouse({id:b(r.props.house.overlord)})},r.componentDidMount=function(){r.checkForAndFetchOverlord()},r.componentDidUpdate=function(){r.checkForAndFetchOverlord()},r}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.house.words?'"'+this.props.house.words+'"':"",t=this.props.house.currentLord?this.props.characters[b(this.props.house.currentLord)].name:"unknown",r=this.props.house.coatOfArms?this.props.house.coatOfArms:"unknown",a=this.props.house.overlord?this.props.houses[b(this.props.house.overlord)]:"",c="unknown";return a&&(c=a.name),n.a.createElement("div",{className:"drill-down"},n.a.createElement("div",{className:"house-title"},n.a.createElement("h3",{className:"house-name",align:"center"},this.props.house.name),n.a.createElement("h4",{className:"house-words",align:"center"},e)),n.a.createElement("div",{className:"houseInfo"},n.a.createElement("p",null,"Current Lord: ",t),n.a.createElement("p",null,"Coat of Arms: ",r),n.a.createElement("p",null,"Overlord: ",c)))}}]),t}(a.Component),k=Object(d.b)(function(e){return{characters:e.characters.list,houses:e.houses.list}},function(e){return{fetchHouse:function(t){return e({type:f.FETCH_HOUSE_START,payload:t})}}})(U),y=function(e){function t(){var e,r;Object(s.a)(this,t);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(r=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(n)))).state={viewBooks:!1,viewCharacters:!1,viewHouses:!0},r.changeView=function(e){var t=!1,a=!1,n=!1;switch(e.target.value){case"books":t=!0;break;case"characters":a=!0;break;case"houses":n=!0}r.setState({viewBooks:t,viewCharacters:a,viewHouses:n})},r.componentDidMount=function(){r.props.fetchBooks()},r.componentDidUpdate=function(){},r}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.selectedCharacter||this.props.selectedHouse;return n.a.createElement("div",{className:"git-app"},n.a.createElement("div",{id:"domain-selector",align:"center"},n.a.createElement("span",null,n.a.createElement("button",{value:"books",onClick:this.changeView,className:"view-selector-button"},"View Books")),n.a.createElement("span",null,n.a.createElement("button",{value:"characters",onClick:this.changeView,className:"view-selector-button"},"View Characters")),n.a.createElement("span",null,n.a.createElement("button",{value:"houses",onClick:this.changeView,className:"view-selector-button"},"View Houses"))),this.state.viewCharacters?n.a.createElement(g,{isDrillDownOpen:e}):"",this.state.viewBooks?n.a.createElement(R,{isDrillDownOpen:e}):"",this.state.viewHouses?n.a.createElement(w,{isDrillDownOpen:e}):"",this.props.selectedCharacter?n.a.createElement(j,{character:this.props.selectedCharacter}):"",this.props.selectedHouse?n.a.createElement(k,{house:this.props.selectedHouse}):"")}}]),t}(a.Component),L=Object(d.b)(function(e){return{selectedCharacter:e.characters.selectedCharacter,selectedHouse:e.houses.selectedHouse}},function(e){return{fetchBooks:function(){return e({type:E.BOOKS_FETCH_START})}}})(y);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r(49);var x=r(18),D=r(6),N={fetching:!1,list:{},error:null,lastPageRequested:0,selectedCharacter:null};var P=r(38),B={fetching:!1,list:{},error:null,lastPageRequest:0};var z=r(8),I=r.n(z),M=r(21),q=r.n(M),K=function(){var e="https://www.anapioficeandfire.com/api";return{books:{fetchAll:function(){return q()({method:"get",url:"https://www.anapioficeandfire.com/api/books?pageSize=20"})}},characters:{fetch:function(t){var r=T(t)?"":"?"+H(t),a=e+"/characters"+r;return q()({method:"get",url:a})},fetchOne:function(t){var r=e+"/characters/"+t.id;return q()({method:"get",url:r})}},houses:{fetch:function(t){var r=T(t)?"":"?"+H(t),a=e+"/houses"+r;return q()({method:"get",url:a})},fetchOne:function(t){var r=e+"/houses/"+t.id;return q()({method:"get",url:r})}}}},W=r(7),V=I.a.mark($),G=I.a.mark(Q),J=I.a.mark(X);function $(e){var t,r;return I.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(W.b)(K().characters.fetch,e.payload);case 3:return t=a.sent,r=e.payload.page,a.next=7,Object(W.c)({type:C.CHARACTERS_FETCH_SUCCESS,data:t,lastPageRequested:r});case 7:a.next=13;break;case 9:return a.prev=9,a.t0=a.catch(0),a.next=13,Object(W.c)({type:C.CHARACTERS_FETCH_FAILURE,error:a.t0});case 13:case"end":return a.stop()}},V,null,[[0,9]])}function Q(e){var t;return I.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(W.b)(K().characters.fetchOne,e.payload);case 3:return t=r.sent,r.next=6,Object(W.c)({type:C.FETCH_CHARACTER_SUCCESS,data:t});case 6:r.next=12;break;case 8:return r.prev=8,r.t0=r.catch(0),r.next=12,Object(W.c)({type:C.FETCH_CHARACTER_FAILURE,error:r.t0});case 12:case"end":return r.stop()}},G,null,[[0,8]])}function X(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(W.d)(C.CHARACTERS_FETCH_START,$);case 2:return e.next=4,Object(W.d)(C.FETCH_CHARACTER_START,Q);case 4:case"end":return e.stop()}},J)}var Y=I.a.mark(ee),Z=I.a.mark(te);function ee(){var e;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(W.b)(K().books.fetchAll);case 3:return e=t.sent,t.next=6,Object(W.c)({type:E.BOOKS_FETCH_SUCCESS,data:e});case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),t.next=12,Object(W.c)({type:E.BOOKS_FETCH_FAILURE,error:t.t0});case 12:case"end":return t.stop()}},Y,null,[[0,8]])}function te(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(W.d)(E.BOOKS_FETCH_START,ee);case 2:case"end":return e.stop()}},Z)}var re={fetching:!1,list:{},error:null,lastPageRequested:0,selectedHouse:null};var ae=I.a.mark(oe),ne=I.a.mark(se),ce=I.a.mark(ie);function oe(e){var t,r;return I.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(W.b)(K().houses.fetch,e.payload);case 3:return t=a.sent,r=e.payload.page,a.next=7,Object(W.c)({type:f.HOUSES_FETCH_SUCCESS,data:t,lastPageRequested:r});case 7:a.next=13;break;case 9:return a.prev=9,a.t0=a.catch(0),a.next=13,Object(W.c)({type:f.HOUSES_FETCH_FAILURE,error:a.t0});case 13:case"end":return a.stop()}},ae,null,[[0,9]])}function se(e){var t;return I.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(W.b)(K().houses.fetchOne,e.payload);case 3:return t=r.sent,r.next=6,Object(W.c)({type:f.FETCH_HOUSE_SUCCESS,data:t});case 6:r.next=12;break;case 8:return r.prev=8,r.t0=r.catch(0),r.next=12,Object(W.c)({type:f.FETCH_HOUSE_FAILURE,error:r.t0});case 12:case"end":return r.stop()}},ne,null,[[0,8]])}function ie(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=W.a,e.next=3,Object(W.d)(f.HOUSES_FETCH_START,oe);case 3:return e.t1=e.sent,e.next=6,Object(W.d)(f.FETCH_HOUSE_START,se);case 6:return e.t2=e.sent,e.t3=[e.t1,e.t2],e.next=10,(0,e.t0)(e.t3);case 10:case"end":return e.stop()}},ce)}var ue=Object(x.c)({characters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C.CHARACTERS_FETCH_START:return Object(D.a)({},e,{fetching:!0,error:null});case C.CHARACTERS_FETCH_SUCCESS:var r={};return t.data.data.forEach(function(e){return r[b(e.url)]=e}),Object(D.a)({},e,{fetching:!1,list:Object(D.a)({},e.list,r),lastPageRequested:t.lastPageRequested});case C.CHARACTERS_FETCH_FAILURE:return console.log(t.error),Object(D.a)({},e,{fetching:!1,error:t.error});case C.FETCH_CHARACTER_START:return Object(D.a)({},e,{error:null});case C.FETCH_CHARACTER_SUCCESS:var a={};return a[b(t.data.data.url)]=t.data.data,Object(D.a)({},e,{list:Object(D.a)({},e.list,a)});case C.FETCH_CHARACTER_FAILURE:return console.log(t.error),Object(D.a)({},e,{error:t.error});case C.SELECT_CHARACTER:var n=e.list[t.payload.id];return Object(D.a)({},e,{selectedCharacter:n});case f.SELECT_HOUSE:return Object(D.a)({},e,{selectedCharacter:null});default:return e}},books:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E.BOOKS_FETCH_START:return Object(D.a)({},e,{fetching:!0,error:null});case E.BOOKS_FETCH_SUCCESS:return Object(D.a)({},e,{fetching:!1,list:t.data.data});case E.BOOKS_FETCH_FAILURE:return Object(D.a)({},e,{fetching:!1,error:t.error});default:return e}},houses:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.HOUSES_FETCH_START:return Object(D.a)({},e,{fetching:!0,error:null});case f.HOUSES_FETCH_SUCCESS:var r={};return t.data.data.forEach(function(e){return r[b(e.url)]=e}),Object(D.a)({},e,{fetching:!1,list:Object(D.a)({},e.list,r),lastPageRequested:t.lastPageRequested});case f.HOUSES_FETCH_FAILURE:return console.log(t.error),Object(D.a)({},e,{fetching:!1,error:t.error});case f.FETCH_HOUSE_START:return Object(D.a)({},e,{error:null});case f.FETCH_HOUSE_SUCCESS:var a={};return a[b(t.data.data.url)]=t.data.data,Object(D.a)({},e,{list:Object(D.a)({},e.list,a)});case f.FETCH_HOUSE_FAILURE:return console.log(t.error),Object(D.a)({},e,{error:t.error});case f.SELECT_HOUSE:var n=e.list[t.payload.id];return Object(D.a)({},e,{selectedHouse:n});case C.SELECT_CHARACTER:return Object(D.a)({},e,{selectedHouse:null});default:return e}}}),le=Object(P.a)(),he=Object(x.e)(ue,Object(x.a)(le));le.run(te),le.run(X),le.run(ie),o.a.render(n.a.createElement(d.a,{store:he},n.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[39,1,2]]]);
//# sourceMappingURL=main.6d6b3804.chunk.js.map