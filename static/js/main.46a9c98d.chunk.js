(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{39:function(e,t,r){e.exports=r(71)},48:function(e,t,r){},49:function(e,t,r){},71:function(e,t,r){"use strict";r.r(t);var a=r(1),n=r.n(a),o=r(36),c=r.n(o),s=r(12),i=r(13),l=r(15),u=r(14),p=r(16),h=function(e){return n.a.createElement("button",{className:"",onClick:function(){e.onClick()}},e.buttonName)},d=r(9),C={CHARACTERS_FETCH_START:"CHARACTERS_FETCH_START",CHARACTERS_FETCH_SUCCESS:"CHARACTER_FETCH_SUCCESS",CHARACTERS_FETCH_FAILURE:"CHARACTERS_FETCH_FAILURE",FETCH_CHARACTER_START:"FETCH_CHARACTER_START",FETCH_CHARACTER_SUCCESS:"FETCH_CHARACTER_SUCCESS",FETCH_CHARACTER_FAILURE:"FETCH_CHARACTER_FAILURE",SELECT_CHARACTER:"SELECT_CHARACTER",BACK_SELECT_CHARACTER:"BACK_SELECT_CHARACTER"},E={CLOSE_DRILL_DOWN:"CLOSE_DRILL_DOWN"},f={BOOKS_FETCH_START:"BOOKS_FETCH_START",BOOKS_FETCH_SUCCESS:"BOOKS_FETCH_SUCCESS",BOOKS_FETCH_FAILURE:"BOOKS_FETCH_FAILURE"},m={HOUSES_FETCH_START:"HOUSES_FETCH_START",HOUSES_FETCH_SUCCESS:"HOUSES_FETCH_SUCCESS",HOUSES_FETCH_FAILURE:"HOUSES_FETCH_FAILURE",SELECT_HOUSE:"SELECT_HOUSE",FETCH_HOUSE_START:"FETCH_HOUSE",FETCH_HOUSE_SUCCESS:"FETCH_HOUSE_SUCCESS",FETCH_HOUSE_FAILURE:"FETCH_HOUSE_FAILURE",BACK_SELECT_HOUSE:"BACK_SELECT_HOUSE"},S=r(19);function b(e){return null==e||0===e.length}function H(e){return Object.keys(e).filter(function(e){return"id"!==e}).map(function(t){return t+"="+e[t]}).join("&")}function T(e){return void 0===e||null===e||""===e}function O(e){var t=e.split("/");return+t[t.length-1]}function v(e,t){return"string"===typeof t?"".concat(e,"-").concat(t):"".concat(e,"-").concat(O(t.url))}function _(e,t,r){return!!t[r.id]&&t[r.id].toLowerCase().includes(e.value.toLowerCase())}function g(e,t,r){return t=null===t||void 0===t?-1/0:t,"string"===typeof(e=null===e||void 0===e?-1/0:e)&&((e=e.toLowerCase()).startsWith("the ")?e=e.slice(4):e.startsWith("a ")&&(e=e.slice(2))),"string"===typeof t&&((t=t.toLowerCase()).startsWith("the ")?t=t.slice(4):t.startsWith("a ")&&(t=t.slice(2))),e>t?1:e<t?-1:0}var A=function(e){function t(){var e,r;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(r=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={pageSize:10,filterUnknownCulture:!1},r.getMoreCharacters=function(){r.props.fetchCharacters({page:+r.props.lastPageRequested+1})},r.getCharacterNameOrAlias=function(e){return e.value?e.value:e.original.aliases[0]+"*"},r.updateCultureFilter=function(){r.setState({filterUnknownCulture:!r.state.filterUnknownCulture})},r.changePageSize=function(e){r.setState({pageSize:e})},r.filterCharacterByCulture=function(e){return!r.state.filterUnknownCulture||!T(e.culture)},r.tdProps=function(e,t,a){return{onClick:function(e,n){if("characterName"===a.id){var o=t.original.id;r.props.selectCharacter({id:o})}n&&n()}}},r.filterBooksAppearedIn=function(e,t){for(var a=0;a<t.books.length;a++){var n=O(t.books[a]);if(r.props.books[n]&&r.props.books[n].name.toLowerCase().includes(e.value.toLowerCase()))return!0}return!1},r.createBookList=function(e){return console.log(e),e.original.povBooks.map(function(e){return O(e)}).filter(function(e){return!!r.props.books[e]}).map(function(e){return n.a.createElement("li",{className:"unclickable",key:v("books-appeared-in-table","".concat(e))},r.props.books[e].name,"*")}).concat(e.row.books.map(function(e){return O(e)}).filter(function(e){return!!r.props.books[e]}).map(function(e){return n.a.createElement("li",{className:"unclickable",key:v("books-appeared-in-table","".concat(e))},r.props.books[e].name)}))},r.constructBooksAppearedIn=function(e){return n.a.createElement("span",null)},r.componentDidMount=function(){r.props.lastPageRequested<1&&r.props.fetchCharacters({page:1})},r.componentDidUpdate=function(){},r}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t="domain-container "+(this.props.isDrillDownOpen?"drill-down-open":"drill-down-closed"),r=Object.values(this.props.characters).filter(function(t){return e.filterCharacterByCulture(t)}),a=[{Header:"Name",accessor:"name",id:"characterName",Footer:"*alias",filterable:!0,className:"clickable",filterMethod:_,Cell:function(t){return n.a.createElement("span",null,e.getCharacterNameOrAlias(t))}},{Header:"Gender",accessor:"gender",filterable:!0,filterMethod:function(e,t){return t.gender.toLowerCase().startsWith(e.value.toLowerCase())}},{Header:"Culture",accessor:"culture",id:"culture",Cell:function(e){return n.a.createElement("span",null,T(e.value)?"unknown":e.value)},filterable:!0,filterMethod:_,Footer:n.a.createElement("span",null,"Filter Unknown: ",n.a.createElement("input",{type:"checkbox",onChange:this.updateCultureFilter,checked:this.state.filterUnknownCulture}))},{Header:"Books Appeared In",accessor:"books",Cell:function(t){return n.a.createElement("span",null,n.a.createElement("ul",{className:"in-table-list"},e.createBookList(t)))},filterable:!0,filterMethod:this.filterBooksAppearedIn,Footer:n.a.createElement("span",null,"*Point of View book")}];return n.a.createElement("div",{className:t},n.a.createElement("h2",{className:"table-title",align:"center"},'Characters in the "Game of Thrones" series'),n.a.createElement("span",{className:"table-span"},n.a.createElement(S.a,{data:r,columns:a,pageSize:this.state.pageSize,onPageSizeChange:this.changePageSize,showFilters:!0,loading:this.props.fetchingCharacters,getTdProps:this.tdProps})),n.a.createElement("div",{className:"api-button"},n.a.createElement(h,{onClick:this.getMoreCharacters,buttonName:"Get More Characters"})))}}]),t}(a.Component),k=Object(d.b)(function(e){return{characters:e.characters.list,lastPageRequested:e.characters.lastPageRequested,fetchingCharacters:e.characters.fetching,books:e.books.list}},function(e){return{fetchCharacters:function(t){return e({type:C.CHARACTERS_FETCH_START,payload:t})},selectCharacter:function(t){return e({type:C.SELECT_CHARACTER,payload:t})}}})(A),w=(r(30),function(e){function t(){var e,r;Object(s.a)(this,t);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(r=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={bookFilter:"",pageSize:15},r.updateFilter=function(e){r.setState({bookFilter:e.target.value})},r.changePageSize=function(e){r.setState({pageSize:e})},r.reformatBookTitle=function(e){return e.startsWith("The")?e.slice(4).concat(", The"):e.startsWith("A")?e.slice(2).concat(", A"):e},r.convertApiDateToFriendlyDate=function(e){return new Date(e).toLocaleDateString()},r}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t="domain-container "+(this.props.isDrillDownOpen?"drill-down-open":"drill-down-closed"),r=[{Header:"Title",accessor:"name",showFilter:!0,id:"bookTitle",Cell:function(t){return n.a.createElement("span",{className:"book-title"},e.reformatBookTitle(t.value))},filterMethod:_,sorthMethod:g},{Header:"Number of Pages",accessor:"numberOfPages",id:"numberOfPages",filterable:!1},{Header:"Release Date",accessor:"released",Cell:function(t){return n.a.createElement("span",{className:"book release-date"},e.convertApiDateToFriendlyDate(t.value))},filterable:!0}];return n.a.createElement("div",{className:t},n.a.createElement("h2",{className:"table-title",align:"center"},'"Game of Thrones" books'),n.a.createElement("span",{className:"table-span"},n.a.createElement(S.a,{data:Object.values(this.props.books),columns:r,loading:this.props.fetchingBooks,showFilters:!0,filterable:!0,pageSize:this.state.pageSize,onPageSizeChange:this.changePageSize,pageSizeOptions:[5,10,15]})))}},{key:"componentDidMount",value:function(){this.setState({bookFilter:""})}}]),t}(a.Component)),R=Object(d.b)(function(e){return{books:e.books.list,fetchingBooks:e.books.fetching}},function(e){return{fetchBooks:function(){return e({type:f.BOOKS_FETCH_START})}}})(w),F=(r(48),function(e){function t(){var e,r;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(r=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={houseFilter:"",pageSize:10},r.getMoreHouses=function(){r.props.fetchHouses({page:+r.props.lastPageRequested+1})},r.updateFilter=function(e){r.setState({houseFilter:e.target.value})},r.changePageSize=function(e){r.setState({pageSize:e})},r.reformatHouseTitle=function(e){return e.startsWith("The")?e.slice(4).concat(", The"):e.startsWith("A")?e.slice(2).concat(", A"):e},r.convertApiDateToFriendlyDate=function(e){return new Date(e).toLocaleDateString()},r.resolveHouseData=function(e){var t=O(e.currentLord);return r.props.characters[t]&&(e.lordName=r.props.characters[t].name),e},r.tdProps=function(e,t,a){return{onClick:function(e,n){if("name"===a.id){var o=O(t.original.url);r.props.selectedHouse&&o===r.props.selectedHouse.id?console.log("House already selected"):r.props.selectHouse({id:o})}else if("lordName"===a.id&&t.row.lordName){var c=O(t.row.currentLord);r.props.selectCharacter({id:c})}n&&n()}}},r.constructLordNameCell=function(e){var t=!!e.row.currentLord&&e.row.lordName?"clickable":"unclickable",r=e.row.currentLord?e.row.lordName?e.row.lordName:"Loading...":"unknown";return n.a.createElement("span",{className:t},r)},r.componentDidMount=function(){r.props.lastPageRequested<1&&r.props.fetchHouses({page:1})},r.componentDidUpdate=function(){Object.values(r.props.houses).filter(function(e){return e.currentLord&&!e.lordName}).forEach(function(e){return r.props.fetchCharacter({id:O(e.currentLord)})})},r}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t="domain-container "+(this.props.isDrillDownOpen?"drill-down-open":"drill-down-closed"),r=[{Header:"Name",accessor:"name",filterMethod:_,className:"table-item clickable"},{Header:"Region",accessor:"region",filterMethod:_,sortMethod:g,className:"table-item unclickable",Cell:function(e){return n.a.createElement("span",null,e.value?e.value:"Region unknown")}},{Header:"Current Lord Id",accessor:"currentLord",filterable:!1,show:!1},{Header:"Current Lord",accessor:"lordName",filterable:!0,Cell:this.constructLordNameCell,filterMethod:_}];return n.a.createElement("div",{className:t},n.a.createElement("h2",{className:"table-title",align:"center"},'The Houses of "Game of Thrones"'),n.a.createElement("span",{className:"table-span"},n.a.createElement(S.a,{data:Object.values(this.props.houses),resolveData:function(t){return t.map(e.resolveHouseData)},columns:r,loading:this.props.fetchingHouses,showFilters:!0,filterable:!0,pageSize:this.state.pageSize,onPageSizeChange:this.changePageSize,getTdProps:this.tdProps})),n.a.createElement("div",{className:"api-button"},n.a.createElement(h,{onClick:this.getMoreHouses,buttonName:"Get More Houses"})))}}]),t}(a.Component)),y=Object(d.b)(function(e){return{houses:e.houses.list,lastPageRequested:e.houses.lastPageRequested,fetchingHouses:e.houses.fetching,characters:e.characters.list,selectedHouse:e.houses.selectedHouse}},function(e){return{fetchHouses:function(t){return e({type:m.HOUSES_FETCH_START,payload:t})},fetchCharacter:function(t){return e({type:C.FETCH_CHARACTER_START,payload:t})},selectHouse:function(t){return e({type:m.SELECT_HOUSE,payload:t})},selectCharacter:function(t){return e({type:C.SELECT_CHARACTER,payload:t})}}})(F),L=function(e){function t(){var e,r;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(r=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).constructAliases=function(){for(var e=r.props.character.aliases,t=r.props.character.name?0:1,a=[];t<e.length;t++)e[t]&&a.push(n.a.createElement("li",{className:"unclickable",key:v("alias-list",e[t])},e[t]));return a},r.handleBackClick=function(){var e=r.props.appHistory[1];console.log(e),"character"===e.domain?r.props.backSelectCharacter({id:e.id}):"house"===e.domain&&r.props.backSelectHouse({id:e.id})},r.showBackButton=function(){return r.props.appHistory.length>1},r}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.character.name?this.props.character.name:this.props.character.aliases[0]+"*",t=this.props.character.culture?this.props.character.culture:"",r=this.constructAliases();return n.a.createElement("div",{className:"drill-down"},n.a.createElement("span",{className:"drill-down-navigation"},this.showBackButton()?n.a.createElement("i",{className:"material-icons drill-down-back",onClick:this.handleBackClick},"arrow_back"):"",n.a.createElement("i",{className:"material-icons close-drill-down",onClick:this.props.closeDrillDown},"close")),n.a.createElement("div",{className:"character-title"},n.a.createElement("h3",{className:"character-name",align:"center"},e),n.a.createElement("h4",{align:"center"},t," ",this.props.character.gender," ",t?"":"from unknwon")),n.a.createElement("div",{className:"character-info"},n.a.createElement("p",null,"Born:"," ",this.props.character.born?this.props.character.born:"unknwon"),n.a.createElement("p",null,"Died:"," ",this.props.character.died?this.props.character.died:"alive or unknown"," "),r.length?this.props.character.name?"Aliases: ":"Other Aliases: ":"",n.a.createElement("ul",null,r)))}}]),t}(a.Component),j=Object(d.b)(function(e){return{appHistory:e.app.drillDownHistory}},function(e){return{closeDrillDown:function(){return e({type:E.CLOSE_DRILL_DOWN})},backSelectCharacter:function(t){return e({type:C.BACK_SELECT_CHARACTER,payload:t})},backSelectHouse:function(t){return e({type:m.BACK_SELECT_HOUSE,payload:t})}}})(L),U=function(e){var t=function(t){e.onMemberClick(t.currentTarget.value)},r=e.members.map(function(r){var a=e.characters[O(r.url)]?"clickable":"unclickable",o=O(r.url);return n.a.createElement("li",{onClick:t,className:a,value:o,key:v("sworn-member",r)},r.name?r.name:r.aliases[0]+"*")});return n.a.createElement("ul",null,r)},N=function(e){function t(){var e,r;Object(s.a)(this,t);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(r=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).checkForAndFetchCharacters=function(){var e=O(r.props.house.overlord);e&&!r.props.houses[e]&&r.props.fetchHouse({id:O(r.props.house.overlord)}),r.props.house.swornMembers.forEach(function(e){var t=O(e);r.props.characters[t]||r.props.fetchCharacter({id:t})})},r.getLordFromCharacters=function(){return r.props.characters[O(r.props.house.currentLord)]},r.selectLord=function(){if(r.getLordFromCharacters()){var e=O(r.getLordFromCharacters().url);r.props.selectCharacter({id:e})}},r.selectOverlord=function(){if(r.props.house.overlord){var e=O(r.props.house.overlord);r.props.houses[e]&&r.props.selectHouse({id:e})}},r.showBackButton=function(){return r.props.appHistory.length>1},r.handleBackClick=function(){var e=r.props.appHistory[1];"character"===e.domain?r.props.backSelectCharacter({id:e.id}):"house"===e.domain&&r.props.backSelectHouse({id:e.id})},r.onMemberClick=function(e){r.props.characters[e]&&r.props.selectCharacter({id:e})},r.isLordLoaded=function(){return console.log(r.props),!!r.props.house.currentLord&&r.getLordFromCharacters()},r.componentDidMount=function(){r.checkForAndFetchCharacters()},r.componentDidUpdate=function(){r.checkForAndFetchCharacters()},r}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.house.words?'"'+this.props.house.words+'"':"",r=this.isLordLoaded()?this.getLordFromCharacters().name:"unknown",a=this.props.house.coatOfArms?this.props.house.coatOfArms:"unknown",o=this.props.house.overlord?this.props.houses[O(this.props.house.overlord)]:"",c="unknown";o&&(c=o.name);var s=this.props.house.swornMembers.map(function(e){return O(e)}).filter(function(t){return!!e.props.characters[t]}).map(function(t){return e.props.characters[t]});return n.a.createElement("div",{className:"drill-down"},n.a.createElement("span",{className:"drill-down-navigation"},this.showBackButton()?n.a.createElement("i",{className:"material-icons drill-down-back clickable",onClick:this.handleBackClick},"arrow_back"):"",n.a.createElement("i",{className:"material-icons close-drill-down clickable",onClick:this.props.closeDrillDown},"close")),n.a.createElement("span",{className:"house-title"},n.a.createElement("h3",{className:"house-name",align:"center"},this.props.house.name),n.a.createElement("h4",{className:"house-words",align:"center"},t)),n.a.createElement("div",{className:"house-info"},n.a.createElement("p",{className:this.isLordLoaded()?"clickable":"unclickable",onClick:this.selectLord},"Current Lord: ",r),n.a.createElement("p",null,"Coat of Arms: ",a),n.a.createElement("p",{className:o?"clickable":"unclickable",onClick:this.selectOverlord},"Overlord: ",c)),"Sworn Members:",this.props.house.swornMembers.length?n.a.createElement(U,{onMemberClick:this.onMemberClick,members:s,characters:this.props.characters}):" None")}}]),t}(a.Component),B=Object(d.b)(function(e){return{characters:e.characters.list,houses:e.houses.list,appHistory:e.app.drillDownHistory}},function(e){return{fetchHouse:function(t){return e({type:m.FETCH_HOUSE_START,payload:t})},selectCharacter:function(t){return e({type:C.SELECT_CHARACTER,payload:t})},selectHouse:function(t){return e({type:m.SELECT_HOUSE,payload:t})},fetchCharacter:function(t){return e({type:C.FETCH_CHARACTER_START,payload:t})},closeDrillDown:function(){return e({type:E.CLOSE_DRILL_DOWN})},backSelectCharacter:function(t){return e({type:C.BACK_SELECT_CHARACTER,payload:t})},backSelectHouse:function(t){return e({type:m.BACK_SELECT_HOUSE,payload:t})}}})(N),D=function(e){function t(){var e,r;Object(s.a)(this,t);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(r=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={viewBooks:!1,viewCharacters:!1,viewHouses:!0},r.changeView=function(e){var t=!1,a=!1,n=!1;switch(e.target.value){case"books":t=!0;break;case"characters":a=!0;break;case"houses":n=!0}r.setState({viewBooks:t,viewCharacters:a,viewHouses:n})},r.componentDidMount=function(){r.props.fetchBooks()},r.componentDidUpdate=function(){},r}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.selectedCharacter||this.props.selectedHouse,t="view-selector-button"+(this.state.viewBooks?" viewing":""),r="view-selector-button"+(this.state.viewHouses?" viewing":""),a="view-selector-button"+(this.state.viewCharacters?" viewing":"");return n.a.createElement("div",{className:"git-app"},n.a.createElement("div",{id:"domain-selector",align:"center"},n.a.createElement("button",{value:"books",hidden:this.state.viewBooks,onClick:this.changeView,className:t},this.state.viewBooks?"Viewing Books":"View Books"),n.a.createElement("button",{value:"characters",onClick:this.changeView,hidden:this.state.viewCharacters,className:a},this.state.viewCharacters?"Viewing Characters":"View Characters"),n.a.createElement("button",{value:"houses",onClick:this.changeView,hidden:this.state.viewHouses,className:r},this.state.viewHouses?"Viewing Houses":"View Houses")),this.state.viewCharacters?n.a.createElement(k,{isDrillDownOpen:e}):"",this.state.viewBooks?n.a.createElement(R,{isDrillDownOpen:e}):"",this.state.viewHouses?n.a.createElement(y,{isDrillDownOpen:e}):"",this.props.selectedCharacter?n.a.createElement(j,{character:this.props.selectedCharacter}):"",this.props.selectedHouse?n.a.createElement(B,{house:this.props.selectedHouse}):"")}}]),t}(a.Component),x=Object(d.b)(function(e){return{selectedCharacter:e.characters.selectedCharacter,selectedHouse:e.houses.selectedHouse}},function(e){return{fetchBooks:function(){return e({type:f.BOOKS_FETCH_START})}}})(D);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r(49);var P=r(18),I=r(5),M={fetching:!1,list:{},error:null,lastPageRequested:0,selectedCharacter:null};var K=r(38),z={fetching:!1,list:{},error:null,lastPageRequest:0};var q={drillDownHistory:[]};var W=r(8),V=r.n(W),G=r(21),J=r.n(G),$=function(){var e="https://www.anapioficeandfire.com/api";return{books:{fetchAll:function(){return J()({method:"get",url:"https://www.anapioficeandfire.com/api/books?pageSize=20"})}},characters:{fetch:function(t){var r=b(t)?"":"?"+H(t),a=e+"/characters"+r;return J()({method:"get",url:a})},fetchOne:function(t){var r=e+"/characters/"+t.id;return J()({method:"get",url:r})}},houses:{fetch:function(t){var r=b(t)?"":"?"+H(t),a=e+"/houses"+r;return J()({method:"get",url:a})},fetchOne:function(t){var r=e+"/houses/"+t.id;return J()({method:"get",url:r})}}}},Q=r(7),X=V.a.mark(ee),Y=V.a.mark(te),Z=V.a.mark(re);function ee(e){var t,r;return V.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(Q.b)($().characters.fetch,e.payload);case 3:return t=a.sent,r=e.payload.page,a.next=7,Object(Q.c)({type:C.CHARACTERS_FETCH_SUCCESS,data:t,lastPageRequested:r});case 7:a.next=13;break;case 9:return a.prev=9,a.t0=a.catch(0),a.next=13,Object(Q.c)({type:C.CHARACTERS_FETCH_FAILURE,error:a.t0});case 13:case"end":return a.stop()}},X,null,[[0,9]])}function te(e){var t;return V.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(Q.b)($().characters.fetchOne,e.payload);case 3:return t=r.sent,r.next=6,Object(Q.c)({type:C.FETCH_CHARACTER_SUCCESS,data:t});case 6:r.next=12;break;case 8:return r.prev=8,r.t0=r.catch(0),r.next=12,Object(Q.c)({type:C.FETCH_CHARACTER_FAILURE,error:r.t0});case 12:case"end":return r.stop()}},Y,null,[[0,8]])}function re(){return V.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Q.d)(C.CHARACTERS_FETCH_START,ee);case 2:return e.next=4,Object(Q.d)(C.FETCH_CHARACTER_START,te);case 4:case"end":return e.stop()}},Z)}var ae=V.a.mark(oe),ne=V.a.mark(ce);function oe(){var e;return V.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(Q.b)($().books.fetchAll);case 3:return e=t.sent,t.next=6,Object(Q.c)({type:f.BOOKS_FETCH_SUCCESS,data:e});case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),t.next=12,Object(Q.c)({type:f.BOOKS_FETCH_FAILURE,error:t.t0});case 12:case"end":return t.stop()}},ae,null,[[0,8]])}function ce(){return V.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Q.d)(f.BOOKS_FETCH_START,oe);case 2:case"end":return e.stop()}},ne)}var se={fetching:!1,list:{},error:null,lastPageRequested:0,selectedHouse:null};var ie=V.a.mark(pe),le=V.a.mark(he),ue=V.a.mark(de);function pe(e){var t,r;return V.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(Q.b)($().houses.fetch,e.payload);case 3:return t=a.sent,r=e.payload.page,a.next=7,Object(Q.c)({type:m.HOUSES_FETCH_SUCCESS,data:t,lastPageRequested:r});case 7:a.next=13;break;case 9:return a.prev=9,a.t0=a.catch(0),a.next=13,Object(Q.c)({type:m.HOUSES_FETCH_FAILURE,error:a.t0});case 13:case"end":return a.stop()}},ie,null,[[0,9]])}function he(e){var t;return V.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(Q.b)($().houses.fetchOne,e.payload);case 3:return t=r.sent,r.next=6,Object(Q.c)({type:m.FETCH_HOUSE_SUCCESS,data:t});case 6:r.next=12;break;case 8:return r.prev=8,r.t0=r.catch(0),r.next=12,Object(Q.c)({type:m.FETCH_HOUSE_FAILURE,error:r.t0});case 12:case"end":return r.stop()}},le,null,[[0,8]])}function de(){return V.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Q.a,e.next=3,Object(Q.d)(m.HOUSES_FETCH_START,pe);case 3:return e.t1=e.sent,e.next=6,Object(Q.d)(m.FETCH_HOUSE_START,he);case 6:return e.t2=e.sent,e.t3=[e.t1,e.t2],e.next=10,(0,e.t0)(e.t3);case 10:case"end":return e.stop()}},ue)}var Ce=Object(P.c)({characters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C.CHARACTERS_FETCH_START:return Object(I.a)({},e,{fetching:!0,error:null});case C.CHARACTERS_FETCH_SUCCESS:var r={};return t.data.data.map(function(e){return Object(I.a)({},e,{id:O(e.url)})}).forEach(function(e){return r[e.id]=e}),Object(I.a)({},e,{fetching:!1,list:Object(I.a)({},e.list,r),lastPageRequested:t.lastPageRequested});case C.CHARACTERS_FETCH_FAILURE:return console.log(t.error),Object(I.a)({},e,{fetching:!1,error:t.error});case C.FETCH_CHARACTER_START:return Object(I.a)({},e,{error:null});case C.FETCH_CHARACTER_SUCCESS:var a=t.data.data;a.id=O(a.url);var n=Object(I.a)({},e.list);return n[a.id]=a,Object(I.a)({},e,{list:n});case C.FETCH_CHARACTER_FAILURE:return console.log(t.error),Object(I.a)({},e,{error:t.error});case C.BACK_SELECT_CHARACTER:case C.SELECT_CHARACTER:var o=e.list[t.payload.id];return Object(I.a)({},e,{selectedCharacter:o});case m.BACK_SELECT_HOUSE:case E.CLOSE_DRILL_DOWN:case m.SELECT_HOUSE:return Object(I.a)({},e,{selectedCharacter:null});default:return e}},books:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.BOOKS_FETCH_START:return Object(I.a)({},e,{fetching:!0,error:null});case f.BOOKS_FETCH_SUCCESS:var r=t.data.data.map(function(e){return Object(I.a)({},e,{id:O(e.url)})});return Object(I.a)({},e,{fetching:!1,list:r});case f.BOOKS_FETCH_FAILURE:return Object(I.a)({},e,{fetching:!1,error:t.error});default:return e}},houses:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m.HOUSES_FETCH_START:return Object(I.a)({},e,{fetching:!0,error:null});case m.HOUSES_FETCH_SUCCESS:var r={};return t.data.data.map(function(e){return Object(I.a)({},e,{id:O(e.url)})}).forEach(function(e){return r[e.id]=e}),Object(I.a)({},e,{fetching:!1,list:Object(I.a)({},e.list,r),lastPageRequested:t.lastPageRequested});case m.HOUSES_FETCH_FAILURE:return console.log(t.error),Object(I.a)({},e,{fetching:!1,error:t.error});case m.FETCH_HOUSE_START:return Object(I.a)({},e,{error:null});case m.FETCH_HOUSE_SUCCESS:var a=t.data.data;a.id=O(a.url);var n=Object(I.a)({},e.list);return n[a.id]=a,Object(I.a)({},e,{list:n});case m.FETCH_HOUSE_FAILURE:return console.log(t.error),Object(I.a)({},e,{error:t.error});case m.BACK_SELECT_HOUSE:case m.SELECT_HOUSE:var o=e.list[t.payload.id];return Object(I.a)({},e,{selectedHouse:o});case C.BACK_SELECT_CHARACTER:case E.CLOSE_DRILL_DOWN:case C.SELECT_CHARACTER:return Object(I.a)({},e,{selectedHouse:null});default:return e}},app:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case C.SELECT_CHARACTER:var a={domain:"character",id:r.payload.id};return(e=t.drillDownHistory).unshift(a),e=e.slice(0,20),Object(I.a)({},t,{drillDownHistory:e});case m.SELECT_HOUSE:var n={domain:"house",id:r.payload.id};return(e=t.drillDownHistory).unshift(n),e=e.slice(0,20),Object(I.a)({},t,{drillDownHistory:e});case m.BACK_SELECT_HOUSE:case C.BACK_SELECT_CHARACTER:return(e=t.drillDownHistory).shift(),Object(I.a)({},t,{drillDownHistory:e});default:return t}}}),Ee=Object(K.a)(),fe=Object(P.e)(Ce,Object(P.a)(Ee));Ee.run(ce),Ee.run(re),Ee.run(de),c.a.render(n.a.createElement(d.a,{store:fe},n.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[39,1,2]]]);
//# sourceMappingURL=main.46a9c98d.chunk.js.map