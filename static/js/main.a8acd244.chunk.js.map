{"version":3,"sources":["components/general/CallApiButton.js","constants/constants.js","utils/utils.js","containers/CharacterContainer.js","containers/BookContainer.js","containers/HouseContainer.js","components/characterStuff/CharacterDrillDown.js","components/houseStuff/SwornMemberList.js","components/houseStuff/HouseDrillDown.js","GoTApp.js","serviceWorker.js","reducers/characterReducer.js","reducers/bookReducer.js","reducers/appReducer.js","services/apiRequests.js","sagas/characterSagas.js","sagas/bookSagas.js","reducers/houseReducer.js","sagas/houseSagas.js","index.js"],"names":["CallApiButton","props","react_default","a","createElement","className","onClick","buttonName","characterActions","CHARACTERS_FETCH_START","CHARACTERS_FETCH_SUCCESS","CHARACTERS_FETCH_FAILURE","FETCH_CHARACTER_START","FETCH_CHARACTER_SUCCESS","FETCH_CHARACTER_FAILURE","SELECT_CHARACTER","BACK_SELECT_CHARACTER","generalActions","CLOSE_DRILL_DOWN","bookActions","BOOKS_FETCH_START","BOOKS_FETCH_SUCCESS","BOOKS_FETCH_FAILURE","houseActions","HOUSES_FETCH_START","HOUSES_FETCH_SUCCESS","HOUSES_FETCH_FAILURE","SELECT_HOUSE","FETCH_HOUSE_START","FETCH_HOUSE_SUCCESS","FETCH_HOUSE_FAILURE","BACK_SELECT_HOUSE","isObjectEmpty","obj","length","constructQueryStringFromObj","Object","keys","filter","key","map","join","isStringEmpty","str","undefined","getIdFromUrlString","splitObj","split","generateListKey","listName","listItem","concat","url","commonFilter","row","column","id","toLowerCase","includes","value","commonSort","b","desc","Infinity","startsWith","slice","CharacterContainer","state","pageSize","filterUnknownCulture","getMoreCharacters","_this","fetchCharacters","page","lastPageRequested","getCharacterNameOrAlias","rowInfo","original","aliases","updateCultureFilter","setState","changePageSize","filterCharacterByCulture","it","culture","tdProps","e","handleOriginal","selectCharacter","filterBooksAppearedIn","i","books","bookId","name","createBookList","console","log","povBooks","bookUrl","constructBooksAppearedIn","componentDidMount","componentDidUpdate","_this2","this","domainContainerClassName","isDrillDownOpen","filteredCharacters","values","characters","columns","Header","accessor","Footer","filterable","filterMethod","Cell","gender","type","onChange","checked","align","react_table_es","data","onPageSizeChange","showFilters","loading","fetchingCharacters","getTdProps","components_general_CallApiButton","Component","connect","list","fetching","dispatch","payload","BookContainer","bookFilter","updateFilter","target","reformatBookTitle","title","convertApiDateToFriendlyDate","apiDate","Date","toLocaleDateString","showFilter","sorthMethod","date","fetchingBooks","pageSizeOptions","fetchBooks","HouseContainer","houseFilter","getMoreHouses","fetchHouses","reformatHouseTitle","resolveHouseData","houseData","lordId","currentLord","lordName","houseId","selectedHouse","selectHouse","characterId","constructLordNameCell","houses","house","forEach","fetchCharacter","sortMethod","region","show","resolveData","fetchingHouses","CharacterDrillDown","constructAliases","character","arr","push","handleBackClick","historyObj","appHistory","domain","backSelectCharacter","backSelectHouse","showBackButton","closeDrillDown","born","died","app","drillDownHistory","SwornMemberList","onMemberClick","event","currentTarget","members","member","HouseDrillDown","checkForAndFetchCharacters","overlord","fetchHouse","swornMembers","getLordFromCharacters","selectLord","selectOverlord","isLordLoaded","words","coatOfArms","overlordName","houseStuff_SwornMemberList","GoTApp","viewBooks","viewCharacters","viewHouses","changeView","selectedCharacter","bookButtonClassName","houseButtonClassName","characterButtonClassName","hidden","containers_CharacterContainer","containers_BookContainer","containers_HouseContainer","characterStuff_CharacterDrillDown","houseStuff_HouseDrillDown","Boolean","window","location","hostname","match","initialState","error","lastPageRequest","apiRequests","API_ROOT","fetchAll","axios","method","fetch","queryString","fetchOne","characterFetch","characterSagas","action","regenerator_default","wrap","_context","prev","next","call","sent","put","t0","stop","_marked","_context2","_marked2","_context3","takeEvery","_marked3","bookSagas","bookSagas_marked","bookSagas_marked2","houseFetch","houseSagas","houseSagas_marked","houseSagas_marked2","all","t1","t2","t3","houseSagas_marked3","rootReducer","combineReducers","arguments","objectSpread","newCharacters","newCharacter","characterList","book","newHouses","newHouse","houseList","newCharacterHistory","unshift","newHouseHistory","shift","sagaMiddleware","createSagaMiddleware","store","createStore","applyMiddleware","run","ReactDOM","render","es","src_GoTApp","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.a8acd244.chunk.js","sourcesContent":["import React from 'react';\r\nimport './CallApiButton.css';\r\n\r\nconst CallApiButton = props => {\r\n  const handleClick = () => {\r\n    props.onClick();\r\n    \r\n  }\r\n\r\n  return(\r\n    <button className=\"query-api\" onClick={handleClick}>\r\n      {props.buttonName}\r\n    </button>\r\n  )\r\n}\r\n\r\nexport default CallApiButton;","export const characterActions = {\r\n  CHARACTERS_FETCH_START: \"CHARACTERS_FETCH_START\",\r\n  CHARACTERS_FETCH_SUCCESS: \"CHARACTER_FETCH_SUCCESS\",\r\n  CHARACTERS_FETCH_FAILURE: \"CHARACTERS_FETCH_FAILURE\",\r\n  FETCH_CHARACTER_START: \"FETCH_CHARACTER_START\",\r\n  FETCH_CHARACTER_SUCCESS: \"FETCH_CHARACTER_SUCCESS\",\r\n  FETCH_CHARACTER_FAILURE: \"FETCH_CHARACTER_FAILURE\",\r\n  SELECT_CHARACTER: \"SELECT_CHARACTER\",\r\n  BACK_SELECT_CHARACTER: \"BACK_SELECT_CHARACTER\"\r\n};\r\n\r\nexport const generalActions = {\r\n  CLOSE_DRILL_DOWN: \"CLOSE_DRILL_DOWN\"\r\n};\r\n\r\nexport const bookActions = {\r\n  BOOKS_FETCH_START: \"BOOKS_FETCH_START\",\r\n  BOOKS_FETCH_SUCCESS: \"BOOKS_FETCH_SUCCESS\",\r\n  BOOKS_FETCH_FAILURE: \"BOOKS_FETCH_FAILURE\"\r\n};\r\n\r\nexport const houseActions = {\r\n  HOUSES_FETCH_START: \"HOUSES_FETCH_START\",\r\n  HOUSES_FETCH_SUCCESS: \"HOUSES_FETCH_SUCCESS\",\r\n  HOUSES_FETCH_FAILURE: \"HOUSES_FETCH_FAILURE\",\r\n  SELECT_HOUSE: \"SELECT_HOUSE\",\r\n  FETCH_HOUSE_START: \"FETCH_HOUSE\",\r\n  FETCH_HOUSE_SUCCESS: \"FETCH_HOUSE_SUCCESS\",\r\n  FETCH_HOUSE_FAILURE: \"FETCH_HOUSE_FAILURE\",\r\n  BACK_SELECT_HOUSE: \"BACK_SELECT_HOUSE\"\r\n};\r\n\r\n","export function isObjectEmpty(obj) {\r\n  if (obj == null) return true;\r\n  if (obj.length === 0) return true;\r\n  return false;\r\n}\r\n\r\nexport function constructQueryStringFromObj(obj) {\r\n  return Object.keys(obj).filter(key => key !== 'id').map(key => key + \"=\" + obj[key]).join('&');\r\n}\r\n\r\nexport function isStringEmpty(str) {\r\n  return (str === undefined || str === null || str === '');\r\n}\r\n\r\nexport function getIdFromUrlString(str) {\r\n  let splitObj = str.split('/');\r\n  return +splitObj[splitObj.length - 1];\r\n}\r\n\r\nexport function generateListKey(listName, listItem) {\r\n  if (typeof listItem === 'string') {\r\n    return `${listName}-${listItem}`;\r\n  } else {\r\n    return `${listName}-${getIdFromUrlString(listItem.url)}`;\r\n  }\r\n}\r\n\r\nexport function commonFilter(filter, row, column) {\r\n  if (!row[column.id])\r\n    return false;\r\n  return row[column.id].toLowerCase().includes(filter.value.toLowerCase());\r\n}\r\n\r\nexport function commonSort(a, b, desc) {\r\n  a = a === null || a === undefined ? -Infinity : a;\r\n  b = b === null || b === undefined ? -Infinity : b;\r\n  if (typeof a === \"string\") {\r\n    a = a.toLowerCase();\r\n    if (a.startsWith(\"the \"))\r\n      a = a.slice(4);\r\n    else if (a.startsWith(\"a \"))\r\n      a = a.slice(2);\r\n  }\r\n  if (typeof b === \"string\") {\r\n    b = b.toLowerCase();\r\n    if (b.startsWith(\"the \"))\r\n      b = b.slice(4);\r\n    else if (b.startsWith(\"a \"))\r\n      b = b.slice(2);\r\n  }\r\n  if (a > b) {\r\n    return 1;\r\n  }\r\n  if (a < b) {\r\n    return -1;\r\n  }\r\n  return 0;\r\n};","import React, { Component } from \"react\";\r\nimport CallApiButton from \"../components/general/CallApiButton\";\r\nimport { connect } from \"react-redux\";\r\nimport { characterActions } from \"../constants/constants\";\r\nimport ReactTable from \"react-table\";\r\nimport { isStringEmpty, commonFilter, getIdFromUrlString, generateListKey } from \"../utils/utils\";\r\n\r\nclass CharacterContainer extends Component {\r\n  state = {\r\n    pageSize: 10,\r\n    filterUnknownCulture: false\r\n  };\r\n\r\n  getMoreCharacters = () => {\r\n    this.props.fetchCharacters({ page: (+this.props.lastPageRequested + 1) });\r\n  };\r\n\r\n  getCharacterNameOrAlias = rowInfo => {\r\n    if (rowInfo.value)\r\n      return rowInfo.value;\r\n    return rowInfo.original.aliases[0] + \"*\";\r\n  }\r\n\r\n  updateCultureFilter = () => {\r\n    this.setState({ filterUnknownCulture: !this.state.filterUnknownCulture });\r\n  }\r\n\r\n  changePageSize = pageSize => {\r\n    this.setState({ pageSize });\r\n  }\r\n\r\n  filterCharacterByCulture = it => {\r\n    if (!this.state.filterUnknownCulture)\r\n      return true;\r\n    if (isStringEmpty(it.culture)) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  tdProps = (state, rowInfo, column) => {\r\n    return {\r\n      onClick: (e, handleOriginal) => {\r\n        if (column.id === \"characterName\") {\r\n          let id = rowInfo.original.id;\r\n          this.props.selectCharacter({ id });\r\n        }\r\n        if (handleOriginal) {\r\n          handleOriginal();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  filterBooksAppearedIn = (filter, row) => {\r\n    for (let i = 0; i < row.books.length; i++) {\r\n      let bookId = getIdFromUrlString(row.books[i]);\r\n      if (this.props.books[bookId]) {\r\n        if (this.props.books[bookId].name.toLowerCase().includes(filter.value.toLowerCase()))\r\n          return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  createBookList = rowInfo => {\r\n    //rowInfo only has urls\\\r\n    console.log(rowInfo);\r\n    let povBooks = rowInfo.original.povBooks.map(bookUrl => getIdFromUrlString(bookUrl)).filter(bookId => !!this.props.books[bookId]).map(bookId => (<li className=\"unclickable\" key={generateListKey('books-appeared-in-table', `${bookId}`)}>{this.props.books[bookId].name}*</li>))\r\n    return povBooks.concat(rowInfo.row.books.map(bookUrl => getIdFromUrlString(bookUrl)).filter(bookId => !!this.props.books[bookId]).map(bookId => (<li className=\"unclickable\" key={generateListKey('books-appeared-in-table', `${bookId}`)}>{this.props.books[bookId].name}</li>)));\r\n  }\r\n\r\n  constructBooksAppearedIn = props => {\r\n\r\n    return (<span></span>)\r\n  }\r\n\r\n  render() {\r\n    const domainContainerClassName = \"domain-container \" + (this.props.isDrillDownOpen ? \"drill-down-open\" : \"drill-down-closed\");\r\n    const filteredCharacters = Object.values(this.props.characters).filter(it => this.filterCharacterByCulture(it));\r\n    const columns = [{\r\n      Header: \"Name\",\r\n      accessor: 'name',\r\n      id: 'characterName',\r\n      Footer: \"*alias\",\r\n      filterable: true,\r\n      className: \"clickable\",\r\n      filterMethod: commonFilter,\r\n      Cell: name => (<span>{this.getCharacterNameOrAlias(name)}</span>)\r\n    }, {\r\n      Header: \"Gender\",\r\n      accessor: 'gender',\r\n      filterable: true,\r\n      filterMethod: (filter, row) => row.gender.toLowerCase().startsWith(filter.value.toLowerCase())\r\n    }, {\r\n      Header: \"Culture\",\r\n      accessor: 'culture',\r\n      id: 'culture',\r\n      Cell: (culture => <span>{!isStringEmpty(culture.value) ? culture.value : \"unknown\"}</span>),\r\n      filterable: true,\r\n      filterMethod: commonFilter,\r\n      Footer: <span>Filter Unknown: <input type='checkbox' onChange={this.updateCultureFilter} checked={this.state.filterUnknownCulture} /></span>\r\n    }, {\r\n      Header: \"Books Appeared In\",\r\n      accessor: \"books\",\r\n      Cell: books => (<span><ul className='in-table-list'>{this.createBookList(books)}</ul></span>),\r\n      filterable: true,\r\n      filterMethod: this.filterBooksAppearedIn,\r\n      Footer: <span>*Point of View book</span>\r\n    }]\r\n    return (\r\n      <div className={domainContainerClassName}>\r\n        <h2 className='table-title' align='center'>Characters in the \"Game of Thrones\" series</h2>\r\n        <span className=\"table-span\">\r\n          <ReactTable\r\n            data={filteredCharacters}\r\n            columns={columns}\r\n            pageSize={this.state.pageSize}\r\n            onPageSizeChange={this.changePageSize}\r\n            showFilters={true}\r\n            loading={this.props.fetchingCharacters}\r\n            getTdProps={this.tdProps}\r\n          />\r\n        </span>\r\n        <div className=\"api-button\">\r\n          <CallApiButton\r\n            onClick={this.getMoreCharacters}\r\n            buttonName={\"Get More Characters\"}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  componentDidMount = () => {\r\n    if (this.props.lastPageRequested < 1)\r\n      this.props.fetchCharacters({ page: 1 });\r\n  };\r\n\r\n  componentDidUpdate = () => {\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    characters: state.characters.list,\r\n    lastPageRequested: state.characters.lastPageRequested,\r\n    fetchingCharacters: state.characters.fetching,\r\n    books: state.books.list\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    fetchCharacters: payload =>\r\n      dispatch({ type: characterActions.CHARACTERS_FETCH_START, payload }),\r\n    selectCharacter: payload => dispatch({ type: characterActions.SELECT_CHARACTER, payload })\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(CharacterContainer);\r\n","import React, { Component } from \"react\";\r\nimport \"react-table/react-table.css\";\r\nimport { connect } from \"react-redux\";\r\nimport { bookActions } from \"../constants/constants\";\r\nimport ReactTable from \"react-table\";\r\nimport { commonFilter, commonSort } from \"../utils/utils\";\r\n\r\nclass BookContainer extends Component {\r\n  state = {\r\n    bookFilter: \"\",\r\n    pageSize: 15\r\n  };\r\n\r\n  updateFilter = e => {\r\n    this.setState({ bookFilter: e.target.value });\r\n  };\r\n\r\n  changePageSize = pageSize => {\r\n    this.setState({ pageSize });\r\n  };\r\n\r\n  reformatBookTitle = title => {\r\n    if (title.startsWith(\"The\")) {\r\n      return title.slice(4).concat(\", The\");\r\n    } else if (title.startsWith(\"A\")) {\r\n      return title.slice(2).concat(\", A\");\r\n    }\r\n    return title;\r\n  };\r\n\r\n  convertApiDateToFriendlyDate = apiDate => {\r\n    let date = new Date(apiDate);\r\n    return date.toLocaleDateString();\r\n  };\r\n\r\n  render() {\r\n    const domainContainerClassName =\r\n      \"domain-container \" +\r\n      (this.props.isDrillDownOpen ? \"drill-down-open\" : \"drill-down-closed\");\r\n    const columns = [\r\n      {\r\n        Header: \"Title\",\r\n        accessor: \"name\",\r\n        showFilter: true,\r\n        id: \"bookTitle\",\r\n        Cell: title => (\r\n          <span className=\"book-title\">\r\n            {this.reformatBookTitle(title.value)}\r\n          </span>\r\n        ),\r\n        filterMethod: commonFilter,\r\n        sorthMethod: commonSort\r\n      },\r\n      {\r\n        Header: \"Number of Pages\",\r\n        accessor: \"numberOfPages\",\r\n        id: \"numberOfPages\",\r\n        filterable: false\r\n      },\r\n      {\r\n        Header: \"Release Date\",\r\n        accessor: \"released\",\r\n        Cell: date => (\r\n          <span className=\"book release-date\">\r\n            {this.convertApiDateToFriendlyDate(date.value)}\r\n          </span>\r\n        ),\r\n        filterable: true\r\n      }\r\n    ];\r\n    return (\r\n      <div className={domainContainerClassName}>\r\n        <h2 className=\"table-title\" align=\"center\">\r\n          \"Game of Thrones\" books\r\n        </h2>\r\n        <span className=\"table-span\">\r\n          <ReactTable\r\n            data={Object.values(this.props.books)}\r\n            columns={columns}\r\n            loading={this.props.fetchingBooks}\r\n            showFilters={true}\r\n            filterable={true}\r\n            pageSize={this.state.pageSize}\r\n            onPageSizeChange={this.changePageSize}\r\n            pageSizeOptions={[5, 10, 15]}\r\n          />\r\n        </span>\r\n      </div>\r\n    );\r\n  }\r\n  componentDidMount() {\r\n    this.setState({\r\n      bookFilter: \"\"\r\n    });\r\n  }\r\n}\r\nconst mapStateToProps = state => {\r\n  return {\r\n    books: state.books.list,\r\n    fetchingBooks: state.books.fetching\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    fetchBooks: () => dispatch({ type: bookActions.BOOKS_FETCH_START })\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(BookContainer);\r\n","import React, { Component } from \"react\";\r\nimport 'react-table/react-table.css';\r\nimport { connect } from \"react-redux\";\r\nimport { houseActions, characterActions } from \"../constants/constants\";\r\nimport ReactTable from \"react-table\";\r\nimport { commonFilter, getIdFromUrlString, commonSort } from \"../utils/utils\";\r\nimport CallApiButton from '../components/general/CallApiButton';\r\n\r\nclass HouseContainer extends Component {\r\n\r\n  state = {\r\n    houseFilter: \"\",\r\n    pageSize: 10\r\n  }\r\n\r\n  getMoreHouses = () => {\r\n    this.props.fetchHouses({ page: (+this.props.lastPageRequested + 1) });\r\n  };\r\n\r\n  updateFilter = e => {\r\n    this.setState({ houseFilter: e.target.value });\r\n  }\r\n\r\n  changePageSize = pageSize => {\r\n    this.setState({ pageSize });\r\n  }\r\n\r\n  reformatHouseTitle = title => {\r\n    if (title.startsWith(\"The\")) {\r\n      return title.slice(4).concat(\", The\");\r\n    } else if (title.startsWith(\"A\")) {\r\n      return title.slice(2).concat(\", A\");\r\n    }\r\n    return title;\r\n  };\r\n\r\n  convertApiDateToFriendlyDate = apiDate => {\r\n    let date = new Date(apiDate);\r\n    return date.toLocaleDateString();\r\n  }\r\n\r\n  resolveHouseData = houseData => {\r\n    // console.log(houseData);\r\n    let lordId = getIdFromUrlString(houseData.currentLord);\r\n    if (this.props.characters[lordId])\r\n      houseData.lordName = this.props.characters[lordId].name;\r\n    return houseData;\r\n  }\r\n\r\n  tdProps = (state, rowInfo, column) => {\r\n    return {\r\n      onClick: (e, handleOriginal) => {\r\n        if (column.id === \"name\") {\r\n          let houseId = getIdFromUrlString(rowInfo.original.url);\r\n          if (!this.props.selectedHouse || houseId !== this.props.selectedHouse.id) {\r\n            this.props.selectHouse({ id: houseId });\r\n          } else\r\n            console.log(\"House already selected\");\r\n        } else if (column.id === \"lordName\") {\r\n          if (rowInfo.row.lordName) {\r\n            let characterId = getIdFromUrlString(rowInfo.row.currentLord);\r\n            this.props.selectCharacter({ id: characterId })\r\n          }\r\n        }\r\n        if (handleOriginal) {\r\n          handleOriginal();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  constructLordNameCell = props => {\r\n    const hasLordName = !!props.row.currentLord && props.row.lordName;\r\n    const className = hasLordName ? \"clickable\" : \"unclickable\";\r\n    const lordName = !!props.row.currentLord ? (!!props.row.lordName ? props.row.lordName : \"Loading...\") : \"unknown\";\r\n    return (<span className={className}>{lordName}</span>)\r\n  }\r\n\r\n  render() {\r\n    const domainContainerClassName = \"domain-container \" + (this.props.isDrillDownOpen ? \"drill-down-open\" : \"drill-down-closed\");\r\n    const columns = [{\r\n      Header: \"Name\",\r\n      accessor: 'name',\r\n      filterMethod: commonFilter,\r\n      className: 'table-item clickable'\r\n    }, {\r\n      Header: \"Region\",\r\n      accessor: 'region',\r\n      filterMethod: commonFilter,\r\n      sortMethod: commonSort,\r\n      className: 'table-item unclickable',\r\n      Cell: region => (<span>{region.value ? region.value : 'Region unknown'}</span>)\r\n    }, {\r\n      Header: \"Current Lord Id\",\r\n      accessor: 'currentLord',\r\n      filterable: false,\r\n      show: false\r\n    }, {\r\n      Header: \"Current Lord\",\r\n      accessor: 'lordName',\r\n      filterable: true,\r\n      Cell: this.constructLordNameCell,\r\n      filterMethod: commonFilter\r\n    }];\r\n    return (\r\n      <div className={domainContainerClassName}>\r\n        <h2 className='table-title' align='center'>The Houses of \"Game of Thrones\"</h2>\r\n        <span className=\"table-span\">\r\n          <ReactTable\r\n            data={Object.values(this.props.houses)}\r\n            resolveData={data => data.map(this.resolveHouseData)}\r\n            columns={columns}\r\n            loading={this.props.fetchingHouses}\r\n            showFilters={true}\r\n            filterable={true}\r\n            pageSize={this.state.pageSize}\r\n            onPageSizeChange={this.changePageSize}\r\n            getTdProps={this.tdProps}\r\n          />\r\n        </span>\r\n        <div className='api-button'>\r\n          <CallApiButton\r\n            onClick={this.getMoreHouses}\r\n            buttonName={\"Get More Houses\"}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  componentDidMount = () => {\r\n    if (this.props.lastPageRequested < 1)\r\n      this.props.fetchHouses({ page: 1 });\r\n  };\r\n\r\n  componentDidUpdate = () => {\r\n    Object.values(this.props.houses).filter(house => house.currentLord && !house.lordName).forEach(house => this.props.fetchCharacter({ id: getIdFromUrlString(house.currentLord) }));\r\n  }\r\n}\r\nconst mapStateToProps = state => {\r\n  return {\r\n    houses: state.houses.list,\r\n    lastPageRequested: state.houses.lastPageRequested,\r\n    fetchingHouses: state.houses.fetching,\r\n    characters: state.characters.list,\r\n    selectedHouse: state.houses.selectedHouse\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    fetchHouses: payload => dispatch({ type: houseActions.HOUSES_FETCH_START, payload }),\r\n    fetchCharacter: payload => dispatch({ type: characterActions.FETCH_CHARACTER_START, payload }),\r\n    selectHouse: payload => dispatch({ type: houseActions.SELECT_HOUSE, payload }),\r\n    selectCharacter: payload => dispatch({ type: characterActions.SELECT_CHARACTER, payload })\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(HouseContainer);\r\n","import React, { Component } from \"react\";\r\nimport { connect } from 'react-redux';\r\nimport '../../assets/stylesheets/drillDown.css';\r\nimport { generateListKey } from \"../../utils/utils\";\r\nimport { generalActions } from \"../../constants/constants\";\r\nimport { characterActions, houseActions } from '../../constants/constants';\r\n\r\nclass CharacterDrillDown extends Component {\r\n  constructAliases = () => {\r\n    let aliases = this.props.character.aliases;\r\n    let i = this.props.character.name ? 0 : 1;\r\n    let arr = [];\r\n    for (i; i < aliases.length; i++) {\r\n      if (!!aliases[i])\r\n        arr.push(\r\n          <li\r\n            className=\"unclickable\"\r\n            key={generateListKey(\"alias-list\", aliases[i])}\r\n          >\r\n            {aliases[i]}\r\n          </li>\r\n        );\r\n    }\r\n    return arr;\r\n  };\r\n\r\n  handleBackClick = () => {\r\n    const historyObj = this.props.appHistory[1];\r\n    console.log(historyObj);\r\n    \r\n    if(historyObj.domain === \"character\"){\r\n      this.props.backSelectCharacter({id: historyObj.id});\r\n    } else if (historyObj.domain === \"house\"){\r\n      this.props.backSelectHouse({id: historyObj.id});\r\n    }\r\n  }\r\n\r\n  showBackButton = () => {\r\n    return this.props.appHistory.length > 1;\r\n  }\r\n\r\n  render() {\r\n    const name = this.props.character.name\r\n      ? this.props.character.name\r\n      : this.props.character.aliases[0] + \"*\";\r\n    const culture = this.props.character.culture\r\n      ? this.props.character.culture\r\n      : \"\";\r\n    const aliases = this.constructAliases();\r\n    return (\r\n      <div className=\"drill-down\">\r\n        <span className=\"drill-down-navigation unclickable\" >\r\n        {this.showBackButton() ?\r\n            <i className=\"material-icons drill-down-back clickable\" onClick={this.handleBackClick}>\r\n              arrow_back\r\n            </i>\r\n            : ''\r\n          }{this.showBackButton() ? <span onClick={this.handleBackClick} className=\"clickable\">Back</span> : ''}\r\n          <i className=\"material-icons close-drill-down clickable\" onClick={this.props.closeDrillDown}>close</i>\r\n          <span onClick={this.props.closeDrillDown} className=\"close-drill-down clickable\">Close</span>\r\n        </span>\r\n        <div className=\"character-title title\">\r\n          <h3 className=\"character-name name\" align=\"center\">\r\n            {name}\r\n          </h3>\r\n          <h4 align=\"center\">\r\n            {culture} {this.props.character.gender}{\" \"}\r\n            {culture ? \"\" : \"from unknwon\"}\r\n          </h4>\r\n        </div>\r\n        <div className=\"character-info info\">\r\n          <p>\r\n            Born:{\" \"}\r\n            {this.props.character.born ? this.props.character.born : \"unknwon\"}\r\n          </p>\r\n          <p>\r\n            Died:{\" \"}\r\n            {this.props.character.died\r\n              ? this.props.character.died\r\n              : \"alive or unknown\"}{\" \"}\r\n          </p>\r\n          {!!aliases.length\r\n            ? this.props.character.name\r\n              ? \"Aliases: \"\r\n              : \"Other Aliases: \"\r\n            : \"\"}\r\n          <ul>{aliases}</ul>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    appHistory: state.app.drillDownHistory\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    closeDrillDown: () => dispatch({type: generalActions.CLOSE_DRILL_DOWN}),\r\n    backSelectCharacter: payload => dispatch({type: characterActions.BACK_SELECT_CHARACTER, payload}),\r\n    backSelectHouse: payload => dispatch({type: houseActions.BACK_SELECT_HOUSE, payload})\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(CharacterDrillDown);\r\n","import React from 'react';\r\nimport { generateListKey, getIdFromUrlString } from '../../utils/utils';\r\n\r\nconst SwornMemberList = props => {\r\n  const listName = 'sworn-member'\r\n  const onMemberClick = event => {\r\n    props.onMemberClick(event.currentTarget.value);\r\n  }\r\n  const members = props.members.map(member => {\r\n    const clickable = props.characters[getIdFromUrlString(member.url)];\r\n    const className = clickable ? \"clickable\" : \"unclickable\";\r\n    const id = getIdFromUrlString(member.url);\r\n    return (<li onClick={onMemberClick} className={className} value={id} key={generateListKey(listName, member)}>{member.name ? member.name : (member.aliases[0] + \"*\")}</li>)\r\n});\r\n  return (\r\n    <ul>\r\n      {members}\r\n    </ul>\r\n  )\r\n}\r\n\r\nexport default SwornMemberList;","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport '../../assets/stylesheets/drillDown.css';\r\nimport { getIdFromUrlString } from \"../../utils/utils\";\r\nimport { houseActions, characterActions, generalActions } from \"../../constants/constants\";\r\nimport SwornMemberList from \"./SwornMemberList\";\r\n\r\nclass HouseDrillDown extends Component {\r\n  checkForAndFetchCharacters = () => {\r\n    const overlord = getIdFromUrlString(this.props.house.overlord);\r\n    if (overlord && !this.props.houses[overlord]) {\r\n      this.props.fetchHouse({\r\n        id: getIdFromUrlString(this.props.house.overlord)\r\n      });\r\n    }\r\n    this.props.house.swornMembers.forEach(member => {\r\n      const id = getIdFromUrlString(member);\r\n      if (!this.props.characters[id]) {\r\n        this.props.fetchCharacter({ id });\r\n      }\r\n    });\r\n  };\r\n\r\n  getLordFromCharacters = () => {\r\n    return this.props.characters[\r\n      getIdFromUrlString(this.props.house.currentLord)\r\n    ];\r\n  };\r\n\r\n  selectLord = () => {\r\n    if (this.getLordFromCharacters()) {\r\n      const id = getIdFromUrlString(this.getLordFromCharacters().url);\r\n      this.props.selectCharacter({ id });\r\n    }\r\n  };\r\n\r\n  selectOverlord = () => {\r\n    if (this.props.house.overlord) {\r\n      const id = getIdFromUrlString(this.props.house.overlord);\r\n      if (this.props.houses[id]) {\r\n        this.props.selectHouse({ id });\r\n      }\r\n    }\r\n  };\r\n\r\n  showBackButton = () => {\r\n    return this.props.appHistory.length > 1;\r\n  }\r\n\r\n  handleBackClick = () => {\r\n    const historyObj = this.props.appHistory[1];\r\n    if(historyObj.domain === \"character\"){\r\n      this.props.backSelectCharacter({id: historyObj.id});\r\n    } else if (historyObj.domain === \"house\"){\r\n      this.props.backSelectHouse({id: historyObj.id});\r\n    }\r\n  }\r\n\r\n  onMemberClick = id => {\r\n    if (this.props.characters[id]) {\r\n      this.props.selectCharacter({ id });\r\n    }\r\n  };\r\n\r\n  isLordLoaded = () => {\r\n    console.log(this.props);\r\n    \r\n    return !!this.props.house.currentLord && this.getLordFromCharacters();\r\n  };\r\n\r\n  render() {\r\n    const words = this.props.house.words\r\n      ? '\"' + this.props.house.words + '\"'\r\n      : \"\";\r\n    const lordName = this.isLordLoaded()\r\n      ? this.getLordFromCharacters().name\r\n      : \"unknown\";\r\n    const coatOfArms = this.props.house.coatOfArms\r\n      ? this.props.house.coatOfArms\r\n      : \"unknown\";\r\n    const overlord = this.props.house.overlord\r\n      ? this.props.houses[getIdFromUrlString(this.props.house.overlord)]\r\n      : \"\";\r\n    let overlordName = \"unknown\";\r\n    if (overlord) {\r\n      overlordName = overlord.name;\r\n    }\r\n    const members = this.props.house.swornMembers\r\n      .map(member => getIdFromUrlString(member))\r\n      .filter(id => !!this.props.characters[id])\r\n      .map(id => this.props.characters[id]);\r\n    return (\r\n      <div className=\"drill-down\">\r\n        <span className=\"drill-down-navigation\" >\r\n          {this.showBackButton() ?\r\n            <i className=\"material-icons drill-down-back clickable\" onClick={this.handleBackClick}>\r\n              arrow_back\r\n            </i>\r\n            : ''\r\n          }{this.showBackButton() ? <span onClick={this.handleBackClick} className=\"clickable\">Back</span> : ''}\r\n          <i className=\"material-icons close-drill-down clickable\" onClick={this.props.closeDrillDown}>\r\n            close\r\n          </i>\r\n          <span onClick={this.props.closeDrillDown} className=\"close-drill-down clickable\">Close</span>\r\n        </span>\r\n        <div className=\"house-title title\">\r\n          <h3 className=\"house-name name\" align=\"center\">\r\n            {this.props.house.name}\r\n          </h3>\r\n          <h4 className=\"house-words words\" align=\"center\">\r\n            {words}\r\n          </h4>\r\n        </div>\r\n        <div className=\"house-info info\">\r\n          <p className={this.isLordLoaded() ? \"clickable\" : \"unclickable\"} onClick={this.selectLord}>Current Lord: {lordName}</p>\r\n          <p>Coat of Arms: {coatOfArms}</p>\r\n          <p className={!!overlord ? \"clickable\" : \"unclickable\"} onClick={this.selectOverlord}>Overlord: {overlordName}</p>\r\n        </div>\r\n        Sworn Members:\r\n        {this.props.house.swornMembers.length ? (\r\n          <SwornMemberList\r\n            onMemberClick={this.onMemberClick}\r\n            members={members}\r\n            characters={this.props.characters}\r\n          />\r\n        ) : (\r\n            \" None\"\r\n          )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    this.checkForAndFetchCharacters();\r\n  };\r\n\r\n  componentDidUpdate = () => {\r\n    this.checkForAndFetchCharacters();\r\n  };\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    characters: state.characters.list,\r\n    houses: state.houses.list,\r\n    appHistory: state.app.drillDownHistory\r\n  };\r\n};\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    fetchHouse: payload =>\r\n      dispatch({ type: houseActions.FETCH_HOUSE_START, payload }),\r\n    selectCharacter: payload =>\r\n      dispatch({ type: characterActions.SELECT_CHARACTER, payload }),\r\n    selectHouse: payload =>\r\n      dispatch({ type: houseActions.SELECT_HOUSE, payload }),\r\n    fetchCharacter: payload =>\r\n      dispatch({ type: characterActions.FETCH_CHARACTER_START, payload }),\r\n    closeDrillDown: () => dispatch({ type: generalActions.CLOSE_DRILL_DOWN }),\r\n    backSelectCharacter: payload => dispatch({type: characterActions.BACK_SELECT_CHARACTER, payload}),\r\n    backSelectHouse: payload => dispatch({type: houseActions.BACK_SELECT_HOUSE, payload})\r\n  };\r\n};\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(HouseDrillDown);\r\n","import React, { Component } from 'react';\r\nimport CharacterContainer from './containers/CharacterContainer'\r\nimport BookContainer from './containers/BookContainer';\r\nimport { bookActions } from './constants/constants';\r\nimport { connect } from \"react-redux\";\r\nimport './App.scss';\r\nimport HouseContainer from './containers/HouseContainer';\r\nimport CharacterDrillDown from './components/characterStuff/CharacterDrillDown';\r\nimport HouseDrillDown from './components/houseStuff/HouseDrillDown';\r\n\r\nclass GoTApp extends Component {\r\n\r\n  state = {\r\n    viewBooks: false,\r\n    viewCharacters: false,\r\n    viewHouses: true\r\n  };\r\n\r\n  changeView = e => {\r\n    let viewBooks = false, viewCharacters = false, viewHouses = false;\r\n    switch (e.target.value) {\r\n      case 'books':\r\n        viewBooks = true;\r\n        break;\r\n      case 'characters':\r\n        viewCharacters = true;\r\n        break;\r\n      case 'houses':\r\n        viewHouses = true;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    this.setState({ viewBooks, viewCharacters, viewHouses });\r\n  }\r\n\r\n  render() {\r\n    const isDrillDownOpen = this.props.selectedCharacter || this.props.selectedHouse;\r\n    const baseClassName = \"view-selector-button\";\r\n    const bookButtonClassName = baseClassName + (this.state.viewBooks ? \" viewing\" : '');\r\n    const houseButtonClassName = baseClassName + (this.state.viewHouses ? \" viewing\" : '');\r\n    const characterButtonClassName = baseClassName + (this.state.viewCharacters ? \" viewing\" : '');\r\n    return (\r\n      <div className=\"got-app\">\r\n        <div id=\"domain-selector\" align='center'>\r\n          <button value='books' hidden={this.state.viewBooks} onClick={this.changeView} className={bookButtonClassName}>{this.state.viewBooks ? \"Viewing Books\" : \"View Books\"}</button>\r\n          <button value='characters' onClick={this.changeView} hidden={this.state.viewCharacters} className={characterButtonClassName}>{this.state.viewCharacters ? \"Viewing Characters\" : \"View Characters\"}</button>\r\n          <button value='houses' onClick={this.changeView} hidden={this.state.viewHouses} className={houseButtonClassName}>{this.state.viewHouses ? \"Viewing Houses\" : \"View Houses\"}</button>\r\n        </div>\r\n        {this.state.viewCharacters ? (<CharacterContainer isDrillDownOpen={isDrillDownOpen} />) : ''}\r\n        {this.state.viewBooks ? (<BookContainer isDrillDownOpen={isDrillDownOpen} />) : ''}\r\n        {this.state.viewHouses ? (<HouseContainer isDrillDownOpen={isDrillDownOpen} />) : ''}\r\n        {this.props.selectedCharacter ? (<CharacterDrillDown character={this.props.selectedCharacter} />) : ''}\r\n        {this.props.selectedHouse ? (<HouseDrillDown house={this.props.selectedHouse} />) : ''}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    this.props.fetchBooks();\r\n  }\r\n\r\n  componentDidUpdate = () => {\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    selectedCharacter: state.characters.selectedCharacter,\r\n    selectedHouse: state.houses.selectedHouse\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    fetchBooks: () => dispatch({ type: bookActions.BOOKS_FETCH_START })\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(GoTApp);\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { characterActions, houseActions, generalActions } from \"../constants/constants\";\r\nimport { getIdFromUrlString } from \"../utils/utils\";\r\n\r\nconst initialState = {\r\n  fetching: false,\r\n  list: {},\r\n  error: null,\r\n  lastPageRequested: 0,\r\n  selectedCharacter: null\r\n};\r\n\r\nexport function characterReducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    case characterActions.CHARACTERS_FETCH_START:\r\n      return { ...state, fetching: true, error: null };\r\n    case characterActions.CHARACTERS_FETCH_SUCCESS:\r\n      let newCharacters = {};\r\n      action.data.data.map(it => { return { ...it, id: getIdFromUrlString(it.url) } }).forEach(it => newCharacters[it.id] = it);\r\n      return { ...state, fetching: false, list: { ...state.list, ...newCharacters }, lastPageRequested: action.lastPageRequested };\r\n    case characterActions.CHARACTERS_FETCH_FAILURE:\r\n      console.log(action.error);\r\n      return { ...state, fetching: false, error: action.error };\r\n    case characterActions.FETCH_CHARACTER_START:\r\n      return { ...state, error: null };\r\n    case characterActions.FETCH_CHARACTER_SUCCESS:\r\n      const newCharacter = action.data.data;\r\n      newCharacter.id = getIdFromUrlString(newCharacter.url);\r\n      const characterList = {...state.list};\r\n      characterList[newCharacter.id] = newCharacter;      \r\n      return { ...state, list: characterList };\r\n    case characterActions.FETCH_CHARACTER_FAILURE:\r\n      console.log(action.error);\r\n      return { ...state, error: action.error }\r\n    case characterActions.BACK_SELECT_CHARACTER:\r\n    case characterActions.SELECT_CHARACTER:\r\n      let selectedCharacter = state.list[action.payload.id];\r\n      return { ...state, selectedCharacter };\r\n    case houseActions.BACK_SELECT_HOUSE:\r\n    case generalActions.CLOSE_DRILL_DOWN:\r\n    case houseActions.SELECT_HOUSE:\r\n      return { ...state, selectedCharacter: null };\r\n    default:\r\n      return state;\r\n  }\r\n};","import { bookActions } from \"../constants/constants\";\r\nimport { getIdFromUrlString } from \"../utils/utils\";\r\n\r\nconst initialState = {\r\n  fetching: false,\r\n  list: {},\r\n  error: null,\r\n  lastPageRequest: 0\r\n};\r\n\r\nexport function bookReducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    case bookActions.BOOKS_FETCH_START:\r\n      return { ...state, fetching: true, error: null };\r\n    case bookActions.BOOKS_FETCH_SUCCESS:\r\n      const books = action.data.data.map(book => {return {...book, id: getIdFromUrlString(book.url)}});\r\n      return { ...state, fetching: false, list: books };\r\n    case bookActions.BOOKS_FETCH_FAILURE:\r\n      return { ...state, fetching: false, error: action.error };\r\n    default:\r\n      // console.log(\"Failed to match action \" + action.type + \" from book reducer.\");\r\n      return state;\r\n  }\r\n}","import { characterActions, houseActions } from \"../constants/constants\";\r\n\r\nconst initialState = {\r\n  drillDownHistory: []\r\n}\r\n\r\nexport function appReducer(state = initialState, action) {\r\n  let drillDownHistory;\r\n  switch (action.type) {\r\n    case characterActions.SELECT_CHARACTER:\r\n      let newCharacterHistory = { domain: \"character\", id: action.payload.id }\r\n      drillDownHistory = state.drillDownHistory;\r\n      drillDownHistory.unshift(newCharacterHistory);\r\n      drillDownHistory = drillDownHistory.slice(0, 20);\r\n      return { ...state, drillDownHistory };\r\n    case houseActions.SELECT_HOUSE:\r\n      let newHouseHistory = { domain: \"house\", id: action.payload.id }\r\n      drillDownHistory = state.drillDownHistory;\r\n      drillDownHistory.unshift(newHouseHistory);\r\n      drillDownHistory = drillDownHistory.slice(0, 20);\r\n      return { ...state, drillDownHistory };\r\n    case houseActions.BACK_SELECT_HOUSE:\r\n    case characterActions.BACK_SELECT_CHARACTER:\r\n      drillDownHistory = state.drillDownHistory;\r\n      drillDownHistory.shift();\r\n      return {...state, drillDownHistory};\r\n    default:\r\n      return state;\r\n  }\r\n}","import axios from \"axios\";\r\nimport { isObjectEmpty, constructQueryStringFromObj } from \"../utils/utils\";\r\n\r\nexport default function() {\r\n  const API_ROOT = \"https://www.anapioficeandfire.com/api\";\r\n  return {\r\n    books: {\r\n      fetchAll: () => {\r\n        let method = \"get\";\r\n        let url = API_ROOT + \"/books?pageSize=20\";\r\n        return axios({\r\n          method,\r\n          url\r\n        });\r\n      }\r\n    },\r\n\r\n    characters: {\r\n      fetch: payload => {\r\n        let queryString = !isObjectEmpty(payload)\r\n          ? \"?\" + constructQueryStringFromObj(payload)\r\n          : \"\";\r\n        let method = \"get\";\r\n        let url = API_ROOT + \"/characters\" + queryString;\r\n        return axios({\r\n          method,\r\n          url\r\n        });\r\n      },\r\n      fetchOne: payload => {\r\n        let method = \"get\";\r\n        let url = API_ROOT + \"/characters/\" + payload.id;\r\n        return axios({\r\n          method,\r\n          url\r\n        });\r\n      }\r\n    },\r\n\r\n    houses: {\r\n      fetch: payload => {\r\n        let queryString = !isObjectEmpty(payload)\r\n          ? \"?\" + constructQueryStringFromObj(payload)\r\n          : \"\";\r\n        let method = \"get\";\r\n        let url = API_ROOT + \"/houses\" + queryString;\r\n        return axios({\r\n          method,\r\n          url\r\n        });\r\n      },\r\n      fetchOne: payload => {\r\n        let method = \"get\";\r\n        let url = API_ROOT + \"/houses/\" + payload.id;\r\n        return axios({\r\n          method,\r\n          url\r\n        });\r\n      }\r\n    }\r\n  };\r\n}\r\n","import apiRequests from '../services/apiRequests';\r\nimport { characterActions } from '../constants/constants';\r\nimport { call, put, takeEvery } from 'redux-saga/effects';\r\n\r\nfunction* fetchCharacters(action) {\r\n  try {\r\n    const data = yield call(apiRequests().characters.fetch, action.payload);\r\n    const lastPageRequested = action.payload.page;\r\n    yield put({ type: characterActions.CHARACTERS_FETCH_SUCCESS, data, lastPageRequested });\r\n  } catch (error) {\r\n    yield put({ type: characterActions.CHARACTERS_FETCH_FAILURE, error });\r\n  }\r\n}\r\n\r\nfunction* characterFetch(action) {\r\n  try {    \r\n    const data = yield call(apiRequests().characters.fetchOne, action.payload);\r\n    yield put({type: characterActions.FETCH_CHARACTER_SUCCESS, data});\r\n  } catch (error) {\r\n    yield put({type: characterActions.FETCH_CHARACTER_FAILURE, error})\r\n  }\r\n}\r\n\r\nexport function* characterSagas() {\r\n  yield takeEvery(characterActions.CHARACTERS_FETCH_START, fetchCharacters);\r\n  yield takeEvery(characterActions.FETCH_CHARACTER_START, characterFetch);\r\n}","import { bookActions } from \"../constants/constants\";\r\nimport { takeEvery, put, call } from \"redux-saga/effects\";\r\nimport apiRequests from \"../services/apiRequests\";\r\n\r\nfunction* fetchBooks() {  \r\n  try {\r\n    const data = yield call(apiRequests().books.fetchAll);\r\n    yield put({ type: bookActions.BOOKS_FETCH_SUCCESS, data });\r\n  } catch (error) {\r\n    yield put({ type: bookActions.BOOKS_FETCH_FAILURE, error });\r\n  }\r\n}\r\n\r\nexport function* bookSagas() {\r\n  yield takeEvery(bookActions.BOOKS_FETCH_START, fetchBooks);\r\n}\r\n","import { houseActions, characterActions, generalActions } from \"../constants/constants\";\r\nimport { getIdFromUrlString } from \"../utils/utils\";\r\n\r\nconst initialState = {\r\n  fetching: false,\r\n  list: {},\r\n  error: null,\r\n  lastPageRequested: 0,\r\n  selectedHouse: null\r\n};\r\n\r\nexport function houseReducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    case houseActions.HOUSES_FETCH_START:\r\n      return { ...state, fetching: true, error: null };\r\n    case houseActions.HOUSES_FETCH_SUCCESS:\r\n      let newHouses = {};\r\n      action.data.data.map(it => { return { ...it, id: getIdFromUrlString(it.url) } }).forEach(it => newHouses[it.id] = it);\r\n      return { ...state, fetching: false, list: { ...state.list, ...newHouses }, lastPageRequested: action.lastPageRequested };\r\n    case houseActions.HOUSES_FETCH_FAILURE:\r\n      console.log(action.error);\r\n      return { ...state, fetching: false, error: action.error };\r\n    case houseActions.FETCH_HOUSE_START:\r\n      return { ...state, error: null };\r\n    case houseActions.FETCH_HOUSE_SUCCESS:\r\n      const newHouse = action.data.data;\r\n      newHouse.id = getIdFromUrlString(newHouse.url);\r\n      const houseList = {...state.list};\r\n      houseList[newHouse.id] = newHouse;\r\n      return { ...state, list: houseList };\r\n    case houseActions.FETCH_HOUSE_FAILURE:\r\n      console.log(action.error);\r\n      return { ...state, error: action.error };\r\n    case houseActions.BACK_SELECT_HOUSE:\r\n    case houseActions.SELECT_HOUSE:\r\n      let selectedHouse = state.list[action.payload.id];\r\n      return { ...state, selectedHouse };\r\n    case characterActions.BACK_SELECT_CHARACTER:\r\n    case generalActions.CLOSE_DRILL_DOWN:\r\n    case characterActions.SELECT_CHARACTER:\r\n      return { ...state, selectedHouse: null };\r\n    default:\r\n      // console.log(\"Failed to match action \" + action.type + \" from house reducer.\");\r\n      return state;\r\n  }\r\n}","import { houseActions } from \"../constants/constants\";\r\nimport { takeEvery, put, call, all } from 'redux-saga/effects';\r\nimport apiRequests from \"../services/apiRequests\";\r\n\r\nfunction* fetchHouses(action) {\r\n  try {\r\n    const data = yield call(apiRequests().houses.fetch, action.payload);\r\n    const lastPageRequested = action.payload.page;\r\n    yield put({ type: houseActions.HOUSES_FETCH_SUCCESS, data, lastPageRequested });\r\n  } catch (error) {\r\n    yield put({ type: houseActions.HOUSES_FETCH_FAILURE, error });\r\n  }\r\n}\r\n\r\nfunction* houseFetch(action) {\r\n  try {    \r\n    const data = yield call(apiRequests().houses.fetchOne, action.payload);\r\n    yield put({type: houseActions.FETCH_HOUSE_SUCCESS, data});\r\n  } catch (error) {\r\n    yield put({type: houseActions.FETCH_HOUSE_FAILURE, error})\r\n  }\r\n}\r\n\r\nexport function* houseSagas() {\r\n  yield all([\r\n    yield takeEvery(houseActions.HOUSES_FETCH_START, fetchHouses),\r\n    yield takeEvery(houseActions.FETCH_HOUSE_START, houseFetch)\r\n  ]);\r\n}","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport GoTApp from './GoTApp';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport './index.css';\r\nimport { createStore, combineReducers, applyMiddleware } from 'redux';\r\nimport { characterReducer } from './reducers/characterReducer';\r\nimport createSagaMiddleware from 'redux-saga';\r\nimport { Provider } from 'react-redux';\r\nimport { bookReducer } from './reducers/bookReducer';\r\nimport { appReducer } from './reducers/appReducer';\r\nimport { characterSagas } from './sagas/characterSagas';\r\nimport { bookSagas } from './sagas/bookSagas';\r\nimport { houseReducer } from './reducers/houseReducer';\r\nimport { houseSagas } from './sagas/houseSagas';\r\n\r\n\r\nconst rootReducer = combineReducers({\r\n  characters: characterReducer,\r\n  books: bookReducer,\r\n  houses: houseReducer,\r\n  app: appReducer\r\n});\r\n\r\nconst sagaMiddleware = createSagaMiddleware();\r\nconst store = createStore(rootReducer, applyMiddleware(sagaMiddleware));\r\nsagaMiddleware.run(bookSagas);\r\nsagaMiddleware.run(characterSagas);\r\nsagaMiddleware.run(houseSagas);\r\nReactDOM.render(\r\n  <Provider store={store}><GoTApp /></Provider>\r\n, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}